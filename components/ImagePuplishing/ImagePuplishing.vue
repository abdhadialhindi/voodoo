<template>
  <section class="app-block light" ref="boxtwo">
    <div class="default-block wrapper blue" style="perspective: 1000px">
      <div class="text">
        <div class="app-name-wrapper">
          <h2 class="app-name">A passionate team for your next hit game</h2>
        </div>
        <div class="description rich-text paragraph-1 custom-bullet">
          <p>
            Promising studios are coached by a passionate and dedicated team.
            Publishing managers help you find your best ideas and pivot your
            gameplays. Each launched game is supported by a 20+ team throughout
            the journey.
          </p>
        </div>
      </div>
      <div class="images-wrapper">
        <div class="images">
          <div
            class="image scroll-img"
            ref="imgtwo"
            style="
              transition-property: transform;
              transition-duration: 1000ms;
              transform-origin: center center;
              transition-timing-function: cubic-bezier(0.23, 1, 0.32, 1);
              transform: translate3d(0px, 22.285px, 0px);
            "
          >
            <div
              style="
                transition-property: transform;
                transition-duration: 1000ms;
                transform-origin: center center;
                transition-timing-function: cubic-bezier(0.23, 1, 0.32, 1);
                transform: translate3d(1.83594px, -0.773237px, 0px);
              "
            >
              <div
                class="image"
                style="display: block; overflow: hidden; position: relative"
              >
                <img
                  src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgwIiBoZWlnaHQ9IjgxMCI+PC9zdmc+"
                  role="presentation"
                  style="display: block; width: 100%"
                />
                <div
                  style="
                    background-image: url('data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgLCgoLDiMaFQ0YDiYeFhohHR0xHSIfFiUeJTcmIjU2HSoePEExPjEvOTo3JSdEPT4wPCsyMjYBCgsLDg0OHBANHTIiFhwvLy8vLy8vLy8vNTUvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABIAGAMBIgACEQEDEQH/xAAZAAADAQEBAAAAAAAAAAAAAAAABQcGBAH/xAAiEAABAwMDBQAAAAAAAAAAAAABAAIDBAUREyExBhIUMlH/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgD/xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAMAwEAAhEDEQA/AKtX3WGkhLi5ZpvWVH5OnqNzn6uq/Wyaemc1udwppD0FVC9urNeU5PrnZZUsV6lvcU7AQQhIrZapoIQHZ2QsNaysAMXCUxtGrwF4hKTJgHbwhCEF/9k=');
                    background-size: cover;
                    opacity: 0;
                    transition: opacity 500ms ease 500ms;
                    position: absolute;
                    left: 0px;
                    top: 0px;
                    width: 100%;
                    height: 100%;
                  "
                ></div>
                <picture>
                  <source
                    srcset="
                      https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?dpr=0.25&amp;fm=webp&amp;h=1080&amp;w=1080  270w,
                      https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?dpr=0.5&amp;fm=webp&amp;h=1080&amp;w=1080   540w,
                      https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?dpr=0.75&amp;fm=webp&amp;h=1080&amp;w=1080  810w,
                      https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?fm=webp&amp;h=1080&amp;w=1080              1080w
                    "
                    sizes="(max-width: 1080px) 100vw, 1080px"
                    type="image/webp"
                  />
                  <source
                    srcset="
                      https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?dpr=0.25&amp;h=1080&amp;w=1080  270w,
                      https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?dpr=0.5&amp;h=1080&amp;w=1080   540w,
                      https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?dpr=0.75&amp;h=1080&amp;w=1080  810w,
                      https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?h=1080&amp;w=1080              1080w
                    "
                    sizes="(max-width: 1080px) 100vw, 1080px"
                  />
                  <img
                    src="https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?h=1080&amp;w=1080"
                    alt="Group photo of the Publishing Managers working at Voodoo."
                    style="
                      position: absolute;
                      left: 0px;
                      top: 0px;
                      width: 100%;
                      height: 100%;
                      opacity: 1;
                      transition: opacity 500ms ease 500ms;
                    "
                  /> </picture
                ><noscript>
                  <picture>
                    <source
                      srcset="
                        https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?dpr=0.25&amp;fm=webp&amp;h=1080&amp;w=1080  270w,
                        https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?dpr=0.5&amp;fm=webp&amp;h=1080&amp;w=1080   540w,
                        https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?dpr=0.75&amp;fm=webp&amp;h=1080&amp;w=1080  810w,
                        https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?fm=webp&amp;h=1080&amp;w=1080              1080w
                      "
                      sizes="(max-width: 1080px) 100vw, 1080px"
                      type="image/webp"
                    />
                    <source
                      srcset="
                        https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?dpr=0.25&amp;h=1080&amp;w=1080  270w,
                        https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?dpr=0.5&amp;h=1080&amp;w=1080   540w,
                        https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?dpr=0.75&amp;h=1080&amp;w=1080  810w,
                        https://www.datocms-assets.com/62418/1654775643-illu-publishing-team.png?h=1080&amp;w=1080              1080w
                      "
                      sizes="(max-width: 1080px) 100vw, 1080px"
                    />
                    <img
                      src="@/assets/puplishing/1654775643-illu-publishing-team.webp"
                      alt="Group photo of the Publishing Managers working at Voodoo."
                      style="
                        position: absolute;
                        left: 0px;
                        top: 0px;
                        width: 100%;
                        height: 100%;
                      "
                      loading="lazy"
                    />
                  </picture>
                </noscript>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</template>
<script lang="ts">
import { gsap } from "gsap";
import { e } from "ofetch/dist/error-8a55452d";

let img: HTMLImageElement;

// const box:any = this.$refs.box;

export default {
  mounted() {
    const boxtwo: any = this.$refs.boxtwo; // get the box element from the DOM using refs.

    const imgtwo: any = this.$refs.imgtwo; // get the image element from the DOM using refs.
    const imagetwo: any = this.$refs.imagetwo;
    const imaginetwo: any = this.$refs.imaginetwo;

    // create a timeline instance to animate with gsap

    let tl = gsap.timeline();

    // add a mousemove event listener to the box element

    boxtwo.addEventListener(
      "mousemove",
      (e: { [x: string]: number; offsetX: number; offsetY: number }) => {
        // calculate the mouse position relative to the center of the box element

        let x = (e.clientX - boxtwo.offsetWidth / 2) / 5;

        let y = (e.clientY - boxtwo.offsetHeight / 2) / 5;

        // animate the image position with gsap, relative to its original position in the center of the box element

        tl.to(imgtwo, 0, { x: -x / 8, y: -y / 8 });
      }
    );
    boxtwo.addEventListener("mouseleave", () => {
      tl.to(imgtwo, 0, { x: 0, y: 8 });
    });
    if (window.innerWidth < 768) {
      window.addEventListener('scroll', this.handleScroll)
    }
},
beforeUnmount() {
    window.removeEventListener('scroll', this.handleScroll)
  },
  methods: {
    handleScroll() {
      const scrollTop = window.pageYOffset
      gsap.to('.scroll-img', { y: scrollTop / 30 })
    }
  }

};
</script>
<style scoped>
.wrapper {
  background-color: var(--blue-025);
  display: flex;
  overflow: hidden;
  border-radius: var(--radius-64);
  padding: 64px;
  max-width: 1024px;
  margin: 0 auto;
}
.text {
  position: relative;
  z-index: 1;
  width: 50%;
}
.app-name-wrapper {
  display: flex;
  align-items: center;
  grid-gap: 16px;
  gap: 16px;
  margin-bottom: 32px;
}
.app-name {
  color: var(--grey-900);
  font-family: Poppins, ui-sans-serif, system-ui, -apple-system, Segoe UI,
    Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif, BlinkMacSystemFont,
    "Segoe UI", "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji",
    "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  font-weight: 700;
  font-size: 40px;
  line-height: 3.6rem;
}
.description {
  color: var(--grey-900);
  font-family: Lato, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
    Ubuntu, Cantarell, Noto Sans, sans-serif, BlinkMacSystemFont, "Segoe UI",
    "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji",
    "Segoe UI Symbol", "Noto Color Emoji";
  font-size: 18px;
  line-height: 1.8rem;
  font-weight: 400;
}
.images-wrapper {
  position: relative;
  width: 50%;
}
.images {
  position: absolute;
  display: grid;
  grid-template: 1fr/1fr;
  width: 845px;
  top: 50%;
  left: 90%;
  transform: translate(-50%, -50%);
}
.image {
  grid-column: 1;
  grid-row: 1;
  width: 80%;
}
@media (max-width: 768px) {
  .wrapper {
    border-radius: var(--radius-32) !important;
    padding: 24px 16px !important;
    grid-template-rows: 1fr auto !important;
    margin-left: 24px !important;
    margin-right: 24px !important;
  }
  .images-wrapper {
    height: 250px;
  }
  .images {
    width: 350px !important;
  }
  .image {
    width: 100% !important;
  }
  img {
    object-fit: cover !important;
  }
}
@media (max-width: 1024px) {
  .wrapper {
    flex-direction: column;
    grid-gap: 32px;
    gap: 32px;
    padding-top: 48px;
    padding-left: 32px;
    padding-right: 48px;
    padding-bottom: 32px;
    display: grid;
    grid-template-rows: 1fr 1.3fr;
    margin-left: 40px;
    margin-right: 40px;
  }
  .text {
    width: 100%;
  }
  .app-name-wrapper {
    margin-bottom: 24px;
  }
  .app-name {
    font-size: 24px;
    line-height: 2.4rem;
  }
  .description {
    width: 100%;
  }
  .images-wrapper {
    width: 100%;
    margin: auto;
  }
  .images {
    width: 90%;
    left: 50%;
  }
}
@media (max-width: 1280px) {
  .wrapper {
    max-width: 928px;
  }
  /* .images{
        width: 621px;
    left: 60%;
    } */
  .image {
    margin: 0 auto;
    width: 90%;
  }
}
</style>